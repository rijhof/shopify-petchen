{% case media.media_type %}
  {% when 'image' %}
    <div class="product-media product-media--image" data-media-type="image" data-media-id="{{ media.id }}">
      <img src="{{ media | img_url: 'master' }}"
           alt="{{ media.alt | escape }}"
           width="{{ media.width }}"
           height="{{ media.height }}"
           loading="lazy">
    </div>

  {% when 'video' %}
    <div class="product-media product-media--video" data-media-type="video" data-media-id="{{ media.id }}">
      {{ media | video_tag:
      image_size: '1024x',
      controls: true,
      muted: true,
      loop: true,
      preload: 'metadata'
      }}
    </div>

  {% when 'external_video' %}
    <div class="product-media product-media--external-video" data-media-type="external_video" data-media-id="{{ media.id }}">
      {{ media | external_video_tag }}
    </div>

  {% when 'model' %}
    <div class="product-media product-media--model" data-media-type="model" data-media-id="{{ media.id }}">
      {{ media | model_viewer_tag }}
    </div>
{% endcase %}

<style>
  .product-media {
    width: 100%;
    height: 100%;
  }

  .product-media img,
  .product-media video {
    width: 100%;
    height: 100%;
    object-fit: contain;
  }

  .product-media--model model-viewer {
    width: 100%;
    height: 100%;
  }
</style>