{% liquid
  if section.settings.menu.links == blank
    assign main_menu_linklist = linklists[section.settings.menu].links
  else
    assign main_menu_linklist = section.settings.menu.links
  endif
%}

<div class="header-wrapper">
  {% if section.blocks.size > 0 %}
    <div class="header-usp-bar hide-mobile" role="complementary" aria-label="Shop benefits">
      <div class="container">
        <ul class="header-usp-list">
          {% for block in section.blocks %}
            {% if block.type == 'usp' %}
              <li class="header-usp-item meta">
                {% if block.settings.icon_type == 'stars' %}
                  <img src="{{ 'icon-header--five-stars.svg' | asset_url }}"
                       alt=""
                       width="72"
                       height="16"
                       class="header-usp-icon"
                       aria-hidden="true">
                {% elsif block.settings.icon_type == 'checkmark' %}
                  <img src="{{ 'icon-header--checkmark-circle.svg' | asset_url }}"
                       alt=""
                       width="16"
                       height="16"
                       class="header-usp-icon"
                       aria-hidden="true">
                {% endif %}
                <span class="header-usp-text">{{ block.settings.text }}</span>
              </li>
            {% endif %}
          {% endfor %}
        </ul>
      </div>
    </div>
  {% endif %}

  <header id="header" class="header" role="banner">
    <div class="container">
      <div class="header-inner">
        <nav class="header-nav hide-mobile" role="navigation" aria-label="Main navigation">
          <ul class="header-nav-list">
            {% for link in main_menu_linklist %}
              <li class="header-nav-item{% if link.links != blank %} has-dropdown{% endif %}">
                {% if link.links != blank %}
                  <button class="header-nav-link header-nav-dropdown-toggle"
                          type="button"
                          aria-expanded="false"
                          aria-controls="dropdown-{{ link.handle }}"
                          aria-haspopup="true">
                    {{ link.title }}

                    <svg xmlns="http://www.w3.org/2000/svg" class="header-dropdown-icon" height="16" width="16" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                      <path fill-rule="evenodd" clip-rule="evenodd" d="M17.028 10.3969C16.5988 9.84099 16.0945 9.3474 15.5295 8.93022L11.0021 5.19988C10.5352 4.80976 10.0454 4.44778 9.53547 4.11585C9.32143 3.97688 9.0732 3.89965 8.81809 3.89267C8.67434 3.89267 8.53648 3.94977 8.43483 4.05142C8.33319 4.15307 8.27608 4.29093 8.27608 4.43469C8.27608 4.89699 8.27608 4.43469 10.1094 6.22015L14.1904 10.3969C14.3817 10.5882 14.6846 10.8273 14.9556 11.1142C15.2266 11.4012 15.386 11.4809 15.2426 11.4968C15.1389 11.7337 14.993 11.9497 14.8121 12.1345C14.4933 12.5012 14.1267 12.8359 13.8875 13.075C13.251 13.7776 12.5694 14.4379 11.847 15.0518C11.1424 15.675 10.3968 16.2502 9.61518 16.7735L7.36741 18.3677C7.10986 18.5345 6.8833 18.7449 6.69786 18.9894C6.59761 19.1267 6.55336 19.297 6.57409 19.4658C6.59481 19.6345 6.67896 19.7891 6.80945 19.8981C7.31958 20.4082 7.03263 20.0415 10.4282 18.1764C11.3261 17.7075 12.1892 17.1747 13.0107 16.5822C13.8347 15.9808 14.6226 15.3314 15.3701 14.6373C15.9063 14.1515 16.3972 13.6179 16.8367 13.0432C17.1066 12.6855 17.2919 12.2712 17.3788 11.8316C17.432 11.3271 17.308 10.8199 17.028 10.3969Z" fill="#3F593F"/>
                    </svg>
                  </button>
                  <ul class="header-dropdown" id="dropdown-{{ link.handle }}" aria-label="Submenu for {{ link.title }}">
                    {% for childlink in link.links %}
                      <li class="header-dropdown-item{% if childlink.links != blank %} has-subdropdown{% endif %}">
                        {% if childlink.links != blank %}
                          <button class="header-subdropdown-toggle lead"
                                  type="button"
                                  aria-expanded="false"
                                  aria-controls="subdropdown-{{ childlink.handle }}"
                                  aria-haspopup="true">
                            {{ childlink.title }}
                            <svg xmlns="http://www.w3.org/2000/svg" class="header-subdropdown-icon" height="16" width="16" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                              <path fill-rule="evenodd" clip-rule="evenodd" d="M17.028 10.3969C16.5988 9.84099 16.0945 9.3474 15.5295 8.93022L11.0021 5.19988C10.5352 4.80976 10.0454 4.44778 9.53547 4.11585C9.32143 3.97688 9.0732 3.89965 8.81809 3.89267C8.67434 3.89267 8.53648 3.94977 8.43483 4.05142C8.33319 4.15307 8.27608 4.29093 8.27608 4.43469C8.27608 4.89699 8.27608 4.43469 10.1094 6.22015L14.1904 10.3969C14.3817 10.5882 14.6846 10.8273 14.9556 11.1142C15.2266 11.4012 15.386 11.4809 15.2426 11.4968C15.1389 11.7337 14.993 11.9497 14.8121 12.1345C14.4933 12.5012 14.1267 12.8359 13.8875 13.075C13.251 13.7776 12.5694 14.4379 11.847 15.0518C11.1424 15.675 10.3968 16.2502 9.61518 16.7735L7.36741 18.3677C7.10986 18.5345 6.8833 18.7449 6.69786 18.9894C6.59761 19.1267 6.55336 19.297 6.57409 19.4658C6.59481 19.6345 6.67896 19.7891 6.80945 19.8981C7.31958 20.4082 7.03263 20.0415 10.4282 18.1764C11.3261 17.7075 12.1892 17.1747 13.0107 16.5822C13.8347 15.9808 14.6226 15.3314 15.3701 14.6373C15.9063 14.1515 16.3972 13.6179 16.8367 13.0432C17.1066 12.6855 17.2919 12.2712 17.3788 11.8316C17.432 11.3271 17.308 10.8199 17.028 10.3969Z" fill="#3F593F"/>
                            </svg>
                          </button>
                          <ul class="header-subdropdown" id="subdropdown-{{ childlink.handle }}" aria-label="Submenu for {{ childlink.title }}">
                            {% for subchildlink in childlink.links %}
                              <li class="header-subdropdown-item">
                                <a href="{{ subchildlink.url }}" class="lead">{{ subchildlink.title }}</a>
                              </li>
                            {% endfor %}
                          </ul>
                        {% else %}
                          <a href="{{ childlink.url }}" class="lead">{{ childlink.title }}</a>
                        {% endif %}
                      </li>
                    {% endfor %}
                  </ul>
                {% else %}
                  <a href="{{ link.url }}" class="header-nav-link">{{ link.title }}</a>
                {% endif %}
              </li>
            {% endfor %}
          </ul>
        </nav>

        <a href="{{ routes.root_url }}" class="header-logo" aria-label="{{ shop.name }} - Home">
          {% if section.settings.logo %}
            <img src="{{ section.settings.logo | img_url: '200x' }}"
                 alt="{{ shop.name }}"
                 width="{{ section.settings.logo_width }}"
                 height="{{ section.settings.logo_width | divided_by: section.settings.logo.aspect_ratio | round }}"
                 loading="eager">
          {% else %}
            <img src="{{ 'logo-petchen.svg' | asset_url }}">
          {% endif %}
        </a>

        <div class="header-actions">
          <button class="header-search-toggle hide-mobile button-secondary icon"
                  type="button"
                  aria-expanded="false"
                  aria-controls="header-search"
                  aria-label="Open search">
            <img src="{{ 'icon-header--magnifying-glas.svg' | asset_url }}" aria-hidden="true">
          </button>

          <a href="{{ routes.account_url }}"
             class="header-action-link hide-mobile button-secondary icon"
             aria-label="Wishlist{% if customer %}{% else %} - Login required{% endif %}">
            <img src="{{ 'icon-header--heart.svg' | asset_url }}" aria-hidden="true">
            <span class="visually-hidden">Wishlist</span>
          </a>

          <a href="{% if customer %}{{ routes.account_url }}{% else %}{{ routes.account_login_url }}{% endif %}"
             class="header-action-link button-secondary icon hide-"
             aria-label="{% if customer %}My account{% else %}Login or register{% endif %}">
            <img src="{{ 'icon-header--avatar.svg' | asset_url }}" aria-hidden="true">
            <span class="visually-hidden">{% if customer %}My account{% else %}Login{% endif %}</span>
          </a>

          <a href="{{ routes.cart_url }}"
             class="header-action-link header-cart button-secondary icon"
             aria-label="Shopping cart with {{ cart.item_count }} {% if cart.item_count == 1 %}item{% else %}items{% endif %}">
            <img src="{{ 'icon-header--shopping-bag.svg' | asset_url }}" aria-hidden="true">
            {% if cart.item_count > 0 %}
              <span class="header-cart-count" aria-hidden="true">{{ cart.item_count }}</span>
            {% endif %}
            <span class="visually-hidden">Shopping cart</span>
          </a>

          <button class="header-mobile-menu-toggle hide-desktop button-secondary icon"
                  type="button"
                  aria-expanded="false"
                  aria-controls="mobile-navigation"
                  aria-label="Open navigation menu">
            <span class="header-mobile-menu-icon" aria-hidden="true">
               <img src="{{ 'icon-header--burger-button.svg' | asset_url }}" aria-hidden="true">
            </span>
          </button>
        </div>
      </div>

      <div class="header-search" id="header-search" aria-hidden="true">
        <form action="{{ routes.search_url }}" method="get" role="search" class="header-search-form">
          <div class="form-group">
            <input type="search"
                   name="q"
                   id="header-search-input"
                   class="header-search-input"
                   placeholder="Search for products..."
                   autocomplete="off"
                   aria-label="Search products">
            <label for="header-search-input">Search for products...</label>
          </div>
          <button type="submit" class="header-search-submit" aria-label="Submit search">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none" aria-hidden="true">
              <circle cx="9" cy="9" r="7" stroke="currentColor" stroke-width="2"/>
              <path d="M19 19L14.65 14.65" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            </svg>
          </button>
        </form>
      </div>
    </div>

    <nav class="mobile-navigation" id="mobile-navigation" aria-label="Mobile navigation" aria-hidden="true">
      <div class="mobile-navigation-inner">
        <div class="mobile-navigation-header">
          <a href="{{ routes.root_url }}" class="mobile-navigation-logo" aria-label="{{ shop.name }} - Home">
            {% if section.settings.logo %}
              <img src="{{ section.settings.logo | img_url: '120x' }}"
                   alt="{{ shop.name }}"
                   width="120"
                   height="{{ 120 | divided_by: section.settings.logo.aspect_ratio | round }}"
                   loading="eager">
            {% else %}
              <img src="{{ 'logo-petchen.svg' | asset_url }}" width="120" alt="{{ shop.name }}">
            {% endif %}
          </a>

          <button class="mobile-navigation-close button-secondary icon"
                  type="button"
                  aria-label="Close navigation menu">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" aria-hidden="true">
              <path d="M18 6L6 18M6 6L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            </svg>
          </button>
        </div>

        <form action="{{ routes.search_url }}" method="get" role="search" class="mobile-search-form">
          <div class="form-group">
            <input type="search"
                   name="q"
                   id="mobile-search-input"
                   class="mobile-search-input"
                   placeholder="Suche..."
                   autocomplete="off"
                   aria-label="Search products">
            <label for="mobile-search-input">Suche...</label>
          </div>
          <button type="submit" class="mobile-search-submit" aria-label="Submit search">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none" aria-hidden="true">
              <circle cx="9" cy="9" r="7" stroke="currentColor" stroke-width="2"/>
              <path d="M19 19L14.65 14.65" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            </svg>
          </button>
        </form>

        <ul class="mobile-nav-list">
          {% for link in main_menu_linklist %}
            <li class="mobile-nav-item{% if link.links != blank %} has-submenu{% endif %}">
              {% if link.links != blank %}
                <button class="mobile-nav-link mobile-submenu-toggle"
                        type="button"
                        aria-expanded="false"
                        aria-controls="mobile-submenu-{{ link.handle }}">
                  {{ link.title }}
                  <svg xmlns="http://www.w3.org/2000/svg" class="mobile-submenu-icon" height="16" width="16" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M17.028 10.3969C16.5988 9.84099 16.0945 9.3474 15.5295 8.93022L11.0021 5.19988C10.5352 4.80976 10.0454 4.44778 9.53547 4.11585C9.32143 3.97688 9.0732 3.89965 8.81809 3.89267C8.67434 3.89267 8.53648 3.94977 8.43483 4.05142C8.33319 4.15307 8.27608 4.29093 8.27608 4.43469C8.27608 4.89699 8.27608 4.43469 10.1094 6.22015L14.1904 10.3969C14.3817 10.5882 14.6846 10.8273 14.9556 11.1142C15.2266 11.4012 15.386 11.4809 15.2426 11.4968C15.1389 11.7337 14.993 11.9497 14.8121 12.1345C14.4933 12.5012 14.1267 12.8359 13.8875 13.075C13.251 13.7776 12.5694 14.4379 11.847 15.0518C11.1424 15.675 10.3968 16.2502 9.61518 16.7735L7.36741 18.3677C7.10986 18.5345 6.8833 18.7449 6.69786 18.9894C6.59761 19.1267 6.55336 19.297 6.57409 19.4658C6.59481 19.6345 6.67896 19.7891 6.80945 19.8981C7.31958 20.4082 7.03263 20.0415 10.4282 18.1764C11.3261 17.7075 12.1892 17.1747 13.0107 16.5822C13.8347 15.9808 14.6226 15.3314 15.3701 14.6373C15.9063 14.1515 16.3972 13.6179 16.8367 13.0432C17.1066 12.6855 17.2919 12.2712 17.3788 11.8316C17.432 11.3271 17.308 10.8199 17.028 10.3969Z" fill="#3F593F"/>
                  </svg>
                </button>
                <ul class="mobile-submenu" id="mobile-submenu-{{ link.handle }}" aria-hidden="true">
                  {% for childlink in link.links %}
                    <li class="mobile-submenu-item{% if childlink.links != blank %} has-subsubmenu{% endif %}">
                      {% if childlink.links != blank %}
                        <button class="mobile-subsubmenu-toggle"
                                type="button"
                                aria-expanded="false"
                                aria-controls="mobile-subsubmenu-{{ childlink.handle }}">
                          {{ childlink.title }}
                          <svg xmlns="http://www.w3.org/2000/svg" class="mobile-subsubmenu-icon" height="16" width="16" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M17.028 10.3969C16.5988 9.84099 16.0945 9.3474 15.5295 8.93022L11.0021 5.19988C10.5352 4.80976 10.0454 4.44778 9.53547 4.11585C9.32143 3.97688 9.0732 3.89965 8.81809 3.89267C8.67434 3.89267 8.53648 3.94977 8.43483 4.05142C8.33319 4.15307 8.27608 4.29093 8.27608 4.43469C8.27608 4.89699 8.27608 4.43469 10.1094 6.22015L14.1904 10.3969C14.3817 10.5882 14.6846 10.8273 14.9556 11.1142C15.2266 11.4012 15.386 11.4809 15.2426 11.4968C15.1389 11.7337 14.993 11.9497 14.8121 12.1345C14.4933 12.5012 14.1267 12.8359 13.8875 13.075C13.251 13.7776 12.5694 14.4379 11.847 15.0518C11.1424 15.675 10.3968 16.2502 9.61518 16.7735L7.36741 18.3677C7.10986 18.5345 6.8833 18.7449 6.69786 18.9894C6.59761 19.1267 6.55336 19.297 6.57409 19.4658C6.59481 19.6345 6.67896 19.7891 6.80945 19.8981C7.31958 20.4082 7.03263 20.0415 10.4282 18.1764C11.3261 17.7075 12.1892 17.1747 13.0107 16.5822C13.8347 15.9808 14.6226 15.3314 15.3701 14.6373C15.9063 14.1515 16.3972 13.6179 16.8367 13.0432C17.1066 12.6855 17.2919 12.2712 17.3788 11.8316C17.432 11.3271 17.308 10.8199 17.028 10.3969Z" fill="#3F593F"/>
                          </svg>
                        </button>
                        <ul class="mobile-subsubmenu" id="mobile-subsubmenu-{{ childlink.handle }}" aria-hidden="true">
                          {% for subchildlink in childlink.links %}
                            <li class="mobile-subsubmenu-item">
                              <a href="{{ subchildlink.url }}" class="mobile-subsubmenu-link">{{ subchildlink.title }}</a>
                            </li>
                          {% endfor %}
                        </ul>
                      {% else %}
                        <a href="{{ childlink.url }}" class="mobile-submenu-link">{{ childlink.title }}</a>
                      {% endif %}
                    </li>
                  {% endfor %}
                </ul>
              {% else %}
                <a href="{{ link.url }}" class="mobile-nav-link">{{ link.title }}</a>
              {% endif %}
            </li>
          {% endfor %}
        </ul>
      </div>
    </nav>
  </header>


  <div class="header-background-decor">
    <img src="{{ 'decor-header-background.svg' | asset_url }}" alt="" aria-hidden="true">
  </div>

</div>

<script src="{{ 'js-section-header.js' | asset_url }}" defer></script>

{% schema %}
{
  "name": "Header",
  "settings": [
    {
      "type": "link_list",
      "id": "menu",
      "default": "main-menu",
      "label": "Main Navigation Menu"
    },
    {
      "type": "image_picker",
      "id": "logo",
      "label": "Logo Image"
    },
    {
      "type": "range",
      "id": "logo_width",
      "label": "Logo Width",
      "min": 50,
      "max": 300,
      "step": 10,
      "default": 150,
      "unit": "px"
    }
  ],
  "blocks": [
    {
      "type": "usp",
      "name": "USP Item",
      "limit": 4,
      "settings": [
        {
          "type": "select",
          "id": "icon_type",
          "label": "Icon Type",
          "options": [
            {
              "value": "stars",
              "label": "5 Stars"
            },
            {
              "value": "checkmark",
              "label": "Checkmark"
            }
          ],
          "default": "checkmark"
        },
        {
          "type": "text",
          "id": "text",
          "label": "USP Text",
          "default": "Free shipping from $50"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Header",
      "blocks": [
        {
          "type": "usp",
          "settings": {
            "icon_type": "checkmark",
            "text": "Free shipping from $50"
          }
        },
        {
          "type": "usp",
          "settings": {
            "icon_type": "checkmark",
            "text": "30 days return policy"
          }
        },
        {
          "type": "usp",
          "settings": {
            "icon_type": "checkmark",
            "text": "Secure payment"
          }
        },
        {
          "type": "usp",
          "settings": {
            "icon_type": "stars",
            "text": "Customer service"
          }
        }
      ]
    }
  ]
}
{% endschema %}